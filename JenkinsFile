pipeline {
    agent any
    stages {
        stage('downloadNexus') {
            steps {
                sh 'curl -X GET "http://localhost:8081/#browse/browse:test-nexus:org%2Fspringframework%2Fboot%2Fspring-boot-starter-parent%2F0.0.1%2Fspring-boot-starter-parent-0.0.1.jar" -O'
            }
        }
        stage('compile') {
            steps {
                sh 'mvn clean compile -e'
            }
        }
        stage('Test') {
            steps {
                sh 'mvn clean test -e'
            }
        }
        stage('Package') {
            steps {
                sh 'mvn clean package -e'
            }
        }
        stage('uploadNexus') {
            steps {
                nexusPublisher nexusInstanceId: 'nexus', nexusRepositoryId: 'test-nexus', packages: [[$class: 'MavenPackage', mavenAssetList: [[classifier: '', extension: 'jar', filePath: 'C:\\develop\\DevOps-Usach\\modulo03\\proyecto-clases\\ejemplo-maven\\build\\DevOpsUsach2020-0.0.1.jar']], mavenCoordinate: [artifactId: 'spring-boot-starter-parent', groupId: 'org.springframework.boot', packaging: 'jar', version: '1.0.0']]]
            }
        }
    }
}